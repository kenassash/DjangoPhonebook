{#-Левый боковой навбар-#}

<!--{# загружаем пользовательский тег #}-->
{% load phonebook_tags %}
{% get_division as divisions %}
{% load mptt_tags %}

{#<nav class="nav flex-column">#}
{##}
{#  <a class="nav-link disabled" tabindex="-1" aria-disabled="true">Наименование:</a>#}
{##}
{#   <!--запускаем пользовательский тег show_divisions, каторый данные загружает уже со страницы 'phonebook/list_divisions.html'-->#}
{##}
{##}
{#- Перечисление всех подразделений, список divisions - сформирован пользовательским тегом show_divisions() в phonebook_tags.py -#}
{#{% for di in divisions %}#}
{#    {% if di.pk == div_selected %}#}
{##}
{#    <!--  отображение списка подразделений через прямого обращение к номеру записи в базе данных -->#}
{#    <!--  ссылка формируется через метод get_absolute_url описанного в классе Division файла models.py-->#}
{#    <a  class="list-group-item list-group-item-action" >#}
{#      <!--   di.title - обращение к имени подразделения, di.cnt - подсчет записи в этом подразделении-->#}
{#    {{ di.title }}#}
{#    </a>#}
{#   {% else %}#}
{#        <a href="{{ di.get_absolute_url }}" class="list-group-item list-group-item-action" name="orderby" >#}
{#      <!--   di.title - обращение к имени подразделения, di.cnt - подсчет записи в этом подразделении-->#}
{#    {{ di.title }}#}
{#    </a>#}
{#    {% endif %}#}
{##}
{#{% endfor %}#}
{#</nav>#}

{% recursetree divisions %}
    <div class="accordion" id="accordionExample">
    <div class="accordion-item">
      <h2 class="accordion-header" id="headingOne">
        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse{{ node.id }}" aria-expanded="true" aria-controls="collapse{{ node.id }}">
          {{ node.title }}
        </button>

      </h2>
      {% if not node.is_leaf_node %}
        <div id="collapse{{ node.id }}" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
          <div class="accordion-body">
            {% for child in node.get_children %}
                {% if child.pk == div_selected %}
                    {{ child.title }}<br>
                {% else %}
                <a href="{{ child.get_absolute_url }}">{{ child.title }}</a><br>
                {% endif %}
            {% endfor %}
          </div>
        </div>
      {% endif %}
    </div>
  </div>
{% endrecursetree %}
